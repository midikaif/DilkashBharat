<nav class="glass">
  <div class="navbar-content">
    <!-- LEFT GROUP: Logo (Dilkash) and Places (Active Pill) -->
    <div class="nav-left">
      <!-- Logo -->
      <button class="menu-toggle" aria-expanded="false" aria-controls="collapsible-nav">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu-icon lucide-menu menu-icon"><path d="M4 5h16"/><path d="M4 12h16"/><path d="M4 19h16"/></svg>
      </button>

      <a href="/" class="logo"> Dilkash </a>
      
      
      <!-- Places Link (Active Pill) -->
      <a href="/places" class="nav-link active"> Places </a>
    </div>

    <!-- RIGHT GROUP: Register, Login, Search Bar -->
    <div class="nav-right" id="collapsible-nav">
      
      <a href="/places" class="nav-link place-link"> Places </a>

      <% if(!currentUser){ %>
        <!-- Standard Link - Register -->
        <a href="/auth/register" class="nav-link"> Register </a>

        <!-- Standard Link - Login -->
        <a href="/auth/login" class="nav-link"> Login </a>
      <% }else { %>
          <a href="/auth/logout" class="nav-link"> Logout </a>
      <% } %>

      <form action="/places" >
        <!-- Search Bar -->
        <div class="search-bar-container">
          <!-- Search Icon -->
          <div class="search-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search-icon lucide-search"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>
          </div>
          <!-- Input Field -->
          <input type="search" placeholder="Search..." class="search-input" name="q"/>
        </div>
      </form>
    </div>
  </div>
</nav>



<script>

    document.addEventListener("DOMContentLoaded", () => {
        // === 1. NAVIGATION TOGGLE LOGIC ===
        const menuToggle = document.querySelector('.menu-toggle');
        const navContainer = document.getElementById('collapsible-nav');

        menuToggle.addEventListener('click', () => {
            // Toggle the 'open' class for the CSS collapse effect
            navContainer.classList.toggle('open');
            
            // Toggle the aria-expanded attribute for accessibility
            const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true' || false;
            menuToggle.setAttribute('aria-expanded', !isExpanded);
        });


        // === 2. ACTIVE LINK LOGIC (Original) ===
        // const navLinks = document.querySelectorAll(".nav-link");

        // navLinks.forEach((link) => {
        //     link.addEventListener("click", (event) => {
        //         // Remove 'active' class from all links
        //         navLinks.forEach((l) => l.classList.remove("active"));
        //         // Add 'active' class to the clicked link
        //         event.currentTarget.classList.add("active");
                
        //         // OPTIONAL: Close the menu after a link is clicked on mobile
        //         if (window.innerWidth < 768) {
        //             navContainer.classList.remove('open');
        //             menuToggle.setAttribute('aria-expanded', 'false');
        //         }
        //     });
        // });

        // Set 'Places' as active by default on load (You had 'places-link', but no ID in HTML)
        // Re-adding the ID to the 'Places' link is necessary if you want this block to work.
        // For simplicity, I'll rely on the existing 'active' class in your HTML
    });
</script>